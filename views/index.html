@{layout('')}
@{title('SPA example')}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
	<meta name="robots" content="all,follow" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
	<meta name="apple-mobile-web-app-title" content="@{'%name'}" />
	<link rel="apple-touch-icon" href="/img/icon.png" />
	<link rel="stylesheet" href="//cdn.componentator.com/spa.min@17.css" />
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,200,700" />
	<script src="//cdn.componentator.com/spa.min@17.js"></script>
	@{import('meta', 'head', 'default.css', 'default.js', 'favicon.ico')}
</head>
<body data-jc="exec" class="invisible" data-jc-class="invisible">
	<header>
		<div class="tools">
		</div>
	</header>

	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-2 col-xs-3" data-jc="selected__common.filter__selector:a.R">
				<div class="mainmenu">
					<div class="scroller-xs">
						<div class="caption">Filtrovanie</div>
						<nav class="links m">
							<a href="/" class="R exec" data-if="all" data-exec="dashboard/refresh"><i class="fas fa-filter"></i>Všetky</a>
							<a href="/category" class="R exec" data-if="category" data-exec="dashboard/category"><i class="fas fa-filter"></i>Kategórie</a>
							<a href="/location" class="R exec" data-if="location" data-exec="dashboard/location"><i class="fas fa-filter"></i>Lokalita</a>
						</nav>
						<div class="caption"></div>
						<button type="button" name="button" class="button exec" data-exec="main/reload"><i class="fas fa-upload"></i>Nahrať zo súboru</button>
					</div>
				</div>
			</div>
			<div class="col-lg-10 col-xs-9">
				<div id="body">
					<div data-jc="part__common.page__if:dashboard;url:/pages/dashboard.html;reload:dashboard/reload"></div>
				</div>
			</div>
		</div>
	</div>

	<div data-jc="importer__common.form__if:load;url:/forms/load.html"></div>
	@{json(user, 'userdata')}

	<script>

		var common = {};
		common.user = PARSE('#userdata');
		NAV.clientside('.R');

		ROUTE('/', function() {
			SET('common.page', 'dashboard');
			SET('common.filter', 'all');
		});
		ROUTE('/category', function() {
			SET('common.page', 'dashboard');
			SET('common.filter', 'category');
		});
		ROUTE('/location', function() {
			SET('common.page', 'dashboard');
			SET('common.filter', 'location');
		});

		PLUGIN('main', function(exports) {
			exports.reload = function() {
				SET('common.form', 'load');
			};


			exports.reload();
		});
	</script>

</body>
</html>
